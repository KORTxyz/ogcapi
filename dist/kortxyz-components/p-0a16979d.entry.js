import{r as t,h as a,H as o,g as i}from"./p-f4ecfe08.js";const s=class{constructor(a){t(this,a),this.droparea=!1,this.dragCounter=0}async setActive(){const t=this.tabEl.parentElement.parentElement;await t.setActiveTab(this.tabEl)}async removeTab(){const t=this.tabEl.parentElement.parentElement;await t.removeTab(this.tabEl)}onauxclick(t){1==t.button?this.removeTab():2==t.button&&console.log("contextmenu")}onDragStart(t){t.dataTransfer.setData("text/plain",JSON.stringify({type:"tab",data:{id:this.tabEl.id,collection:this.collection}}))}onDragEnter(){this.dragCounter++,this.tabEl.style.background="#555"}onDragLeave(){this.dragCounter--,0==this.dragCounter&&(this.tabEl.style.background="")}async splitView(){const t=this.tabEl.parentElement.parentElement,a=t.parentElement;let o=document.createElement("kortxyz-splitview");o.setAttribute("slot",t.slot);let i=document.createElement("kortxyz-tabbar");"first"==t.slot&&"ROW"!=a.tagName?a.prepend(o):a.append(o),t.setAttribute("slot","first"),o.appendChild(t),i.setAttribute("slot","second"),o.appendChild(i);const s=await t.getActiveTab();i.addCollectionTab(s.collection),t.children.length>1&&t.removeTab(s),document.querySelectorAll("kortxyz-mapbox").forEach((t=>{t.initResizeObsersver(),t.inFocus=!1}))}render(){return this.droparea?a(o,{class:"droparea",onDragEnter:()=>this.onDragEnter(),ondragleave:()=>this.onDragLeave()},a("i",{class:"material-icons",onClick:()=>this.splitView()},"horizontal_distribute")):a(o,{class:this.active?"active":"",draggable:"true",onauxclick:t=>this.onauxclick(t),ondragstart:t=>this.onDragStart(t),onDragEnter:()=>this.onDragEnter(),ondragleave:()=>this.onDragLeave()},a("i",{class:"material-icons",onClick:()=>this.setActive()},this.icon),a("header",{title:this.name,onClick:()=>this.setActive()},this.name.split(":").pop()),a("i",{class:"material-icons",onClick:()=>this.removeTab()},"close"))}get tabEl(){return i(this)}};s.style="kortxyz-tab{display:flex;color:#8B8B8B;background:#2D2D2D;cursor:pointer;user-select:none}kortxyz-tab:after{content:'';width:2px;background:#252526}kortxyz-tab.droparea{flex:1;cursor:default;background:#252526}kortxyz-tab>droparea{flex:1}kortxyz-tab.active{background:#1E1E1E;color:#BBB}kortxyz-tab>header{font-family:'Roboto Mono', monospace;font-size:12px;flex:1;line-height:30px;white-space:nowrap}kortxyz-tab>.material-icons{font-size:10px;padding:10px;flex:0 0 10px}kortxyz-tab>.material-icons:last-child{opacity:0}kortxyz-tab:hover>.material-icons:last-child{opacity:1}kortxyz-tab>.material-icons:last-child:hover{color:white}kortxyz-tab>.material-icons:last-child{opacity:0}kortxyz-tab>.material-icons{margin-left:auto;font-size:10px;padding:10px;flex:0 0 10px}";export{s as kortxyz_tab}